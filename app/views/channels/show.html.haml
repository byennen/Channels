- title @channel.name

- content_for :open_graph do
  %meta{property: "og:title", content: @video.title}
  %meta{property: "og:type", content: "video.other"}
  %meta{property: "og:url",  content: channel_video_url(@channel, @video)}
  %meta{property: "og:image",content: "http://46qa.localtunnel.com/#{@video.image.url}"}
  %meta{property: "og:site_name", content: "Altimarc"}
  %meta{property: "og:description", content: @video.description}

.videoplayer
  #video
  #player
    .projekktor
  #video_info.container
    %h2= @channel.name + ' - ' + @video.title
    %ul#video_social_sharing
      %li= link_to "Facebook", "#"
      %li= link_to "Tweet", "#"
      -#TODO: Add share by email function 
      -#%li= link_to "Share", "#"
      %li= link_to "Details", "#", :id => "details_link"
    #details
      .row
        .span
          %p= @video.description


.background-wrapper{ :style => "background: url('#{@channel.background_image.url if @channel.background_image_uid}') repeat-x ##{@channel.background_color};" }
  .content
    .container
      %h3 
        Recent Episodes
        = link_to "(See all)", channel_videos_url(@channel)
        %a.btn.btn-primary.btn-large{"data-toggle" => "modal", :href => "#payments"} Launch demo Payments

      = render 'channels/videos'

      .row
        #posts.span8
          .tabbable
            / Only required for left/right tabs
            %ul.nav.nav-tabs
              %li.active
                %a{"data-toggle" => "tab", :href => "#tab1"} Latest
              %li
                %a{"data-toggle" => "tab", :href => "#tab2"} Music
              %li
                %a{"data-toggle" => "tab", :href => "#tab3"} Photos

          .tab-content
            #tab1.tab-pane.active
              = render :partial => 'post', :collection => @posts
              .row
                = link_to "Read More >>", channel_posts_url(@channel), :class => "read-more pull-right"
            #tab2.tab-pane
              = render 'channels/music'
            #tab3.tab-pane{:style => "text-align:center"}
              = render 'channels/photos'

        .span4
          .rightsidebar
            %h1= @channel.name
            .span
            = render 'channels/social_media'
            #description.span
              %p= @channel.description

#payments.modal.hide.fade.in
  .modal-header
    %a.close{"data-dismiss" => "modal"} Ã—
    %h3 Become a Paid Member!
  .modal-body
    %h4 Paid Members gets access to everything.
    %p More info about everything.

    = simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-horizontal'}) do |f|
      = f.error_notification

      #stripe_error.error_explanation
        %noscript JavaScript is not enabled and is required for this form. First enable it in your web browser settings.
      .payment.span
        %h3 Thanks for paying. Your hard earned money goes towards making Altimarc an even better product.

        //credit card
        .control-group.credit_card
          %label.control-label{:for => "credit_card"} Credit Card
          .controls
            %input#card_number.input-large{:type => "text"}

        //credit card icons
        .span
          = image_tag('payments/icon-lock.png')
          %strong Secure
          = image_tag('payments/img-creditcards.png')

        //credit card cvv
        .control-group.security_code
          %label.control-label{:for => "security_code"} Security Code on Card (CVV)
          .controls
            %input#security_code.input-small{:type => "text", :size => '4', :maxlength => '4'}

        .control-group.card_expiration
          %label.control-label{:for => "card_month"} Card Expiration
          .controls
            = select_month nil, {add_month_numbers: true, :use_short_month => true}, {name: nil, id: "card_month", :class => 'input-small'}
            = select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year", :class => 'input-small'}

        = f.hidden_field :stripe_card_token

      //coupon
      .coupon.span
        = link_to "Got a Coupon Code?", "javascript:;", :id => "coupon_link"
        .control-group#coupon_code
          %label.control-label{:for => "input01"} Coupon Code
          .controls
            %input#input01.input-small{:type => "text"}


      //info
      .info.span
        %p
          %strong Your 24-hour free trial lasts until
          - trail_end_time = Time.now + 1.days
          %strong= trail_end_time.strftime("%I:%M%p %m-%d-%y")
          If you don't want to continue using Altimarc, just cancel before the trial ends and you won't be charged. Otherwise, you'll pay just $9.95/month for the service as long as your account is open. You can cancel any time.

      //policy
      .policy.span
      %p 
        By clicking Create my account you agree to the
        = link_to "Terms of Service,", terms_url(:subdomain => "www")
        = link_to "Privacy,", privacy_url(:subdomain => "www")
        %span and
        = succeed "." do
          = link_to "Refund policies", refund_url(:subdomain => "www")

    .actions.span
      = f.submit "Create my account", :class => 'btn-primary btn-success btn-large'

  .modal-footer
    %a.btn.btn-success{:href => "#"} Submit



- javascript 'frontend/plugins/html5video'

-#video
:javascript
  $(document).ready(function() {
    $('#details').hide();
    $('#details_link').click(function () {
      $('#details').toggle();
    });

    var player = projekktor('.projekktor', {
    	width: 896,
    	height: 504,
    	poster: "#{@video.image.url}",
    	controls: true,
    	playlist: [
        {
          0: {src:'http://www.projekktor.com/content/demos/slideshow/html5-Logo.jpg', type:"image/jpeg"},
          config:{
            duration: 5
          }
        },
        {
        },
        {
          0: {src:'http://www.projekktor.com/content/demos/slideshow/image1.png', type:"image/png"},
          config:{
            duration: 5
          }
        }
    	]
    });
  });

-#twitter
:javascript
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

-#google plus
%script{:src => "https://apis.google.com/js/plusone.js", :type => "text/javascript"}

